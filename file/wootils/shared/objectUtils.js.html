<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">wootils/shared/objectUtils.js | wootils</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="A set of Javascript utilities for building Node and browser apps."><meta property="twitter:card" content="summary"><meta property="twitter:title" content="wootils"><meta property="twitter:description" content="A set of Javascript utilities for building Node and browser apps."></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/homer0/wootils"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#browser">browser</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/wootils/browser/simpleStorage.js~SimpleStorage.html">SimpleStorage</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-SimpleStorageEntriesOptions">SimpleStorageEntriesOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-SimpleStorageEntry">SimpleStorageEntry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-SimpleStorageOptions">SimpleStorageOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-SimpleStorageStorage">SimpleStorageStorage</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-SimpleStorageStorageAvailableMethod">SimpleStorageStorageAvailableMethod</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-SimpleStorageStorageDeleteMethod">SimpleStorageStorageDeleteMethod</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-SimpleStorageStorageGetMethod">SimpleStorageStorageGetMethod</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-SimpleStorageStorageLogger">SimpleStorageStorageLogger</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-SimpleStorageStorageOptions">SimpleStorageStorageOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-SimpleStorageStorageSetMethod">SimpleStorageStorageSetMethod</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#node">node</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/wootils/node/appConfiguration.js~AppConfiguration.html">AppConfiguration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/wootils/node/environmentUtils.js~EnvironmentUtils.html">EnvironmentUtils</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/wootils/node/errorHandler.js~ErrorHandler.html">ErrorHandler</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/wootils/node/logger.js~Logger.html">Logger</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/wootils/node/pathUtils.js~PathUtils.html">PathUtils</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-appConfiguration">appConfiguration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-errorHandlerWithOptions">errorHandlerWithOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-appLoggerWithOptions">appLoggerWithOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-loggerWithOptions">loggerWithOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-packageInfo">packageInfo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-pathUtilsWithHome">pathUtilsWithHome</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-rootRequire">rootRequire</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-environmentUtils">environmentUtils</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-errorHandler">errorHandler</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-appLogger">appLogger</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-logger">logger</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-packageInfoProvider">packageInfoProvider</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-pathUtils">pathUtils</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-rootRequireProvider">rootRequireProvider</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-AppConfigurationOptions">AppConfigurationOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Provider">Provider</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProviderRegisterMethod">ProviderRegisterMethod</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://yarnpkg.com/en/package/jimple">Jimple</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#shared">shared</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/wootils/shared/apiClient.js~APIClient.html">APIClient</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/wootils/shared/eventsHub.js~EventsHub.html">EventsHub</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/wootils/shared/objectUtils.js~ObjectUtils.html">ObjectUtils</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-deferred">deferred</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-APIClientEndpoint">APIClientEndpoint</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-APIClientEndpoints">APIClientEndpoints</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-FetchClient">FetchClient</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-FetchOptions">FetchOptions</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">wootils/shared/objectUtils.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">const extend = require(&apos;extend&apos;);
/**
 * A small collection of utility methods to work with objects.
 */
class ObjectUtils {
  /**
   * @throws {Error} is called. This class is meant to be have only static methods.
   * @ignore
   */
  constructor() {
    throw new Error(&apos;ObjectUtils is a static class&apos;);
  }
  /**
   * This method makes a deep merge of a list of objects into a new one.
   * @example
   * const objA = { a: &apos;first&apos; };
   * const objB = { b: &apos;second&apos; };
   * console.log(ObjectUtils.merge(objA, objB));
   * // Will output { a: &apos;first&apos;, b: &apos;second&apos; }
   * @param {...{Object}} targets The objects to merge.
   * @return {Object}
   */
  static merge(...targets) {
    return extend(true, {}, ...targets);
  }
  /**
   * Creates a deep copy of a given object.
   * @param {Object} target The object to copy.
   * @return {Object}
   */
  static copy(target) {
    return this.merge(target);
  }
  /**
   * Returns the value of an object property using a path.
   * @example
   * const obj = {
   *   propOne: {
   *     propOneSub: &apos;Charito!&apos;,
   *   },
   *   propTwo: &apos;!!!&apos;,
   * };
   * console.log(ObjectUtils.get(
   *   obj,
   *   &apos;propOne.propOneSub&apos;
   * ));
   * // Will output &apos;Charito!&apos;
   *
   * @param {Object}  target                The object from where the property will be read.
   * @param {string}  objPath               The path to the property.
   * @param {string}  [pathDelimiter=&apos;.&apos;]   The delimiter that will separate the path components.
   * @param {boolean} [failWithError=false] Whether or not to throw an error when the path is
   *                                        invalid. If this is `false`, the method will silently
   *                                        fail and return `undefined`.
   * @return {*}
   * @throws {Error} If the path is invalid and `failWithError` is set to `true`.
   */
  static get(target, objPath, pathDelimiter = &apos;.&apos;, failWithError = false) {
    const parts = objPath.split(pathDelimiter);
    const first = parts.shift();
    let currentElement = target[first];
    if (typeof currentElement === &apos;undefined&apos;) {
      if (failWithError) {
        throw new Error(`There&apos;s nothing on &apos;${objPath}&apos;`);
      }
    } else if (parts.length) {
      let currentPath = first;
      parts.some((currentPart) =&gt; {
        let breakLoop = false;
        currentPath += `${pathDelimiter}${currentPart}`;
        currentElement = currentElement[currentPart];
        if (typeof currentElement === &apos;undefined&apos;) {
          if (failWithError) {
            throw new Error(`There&apos;s nothing on &apos;${currentPath}&apos;`);
          } else {
            breakLoop = true;
          }
        }

        return breakLoop;
      });
    }

    return currentElement;
  }
  /**
   * Sets a property on an object using a path. If the path doesn&apos;t exist, it will be created.
   * @example
   * const target = {};
   * console.log(ObjectUtils.set(target, &apos;some.prop.path&apos;, &apos;some-value&apos;));
   * // Will output { some: { prop: { path: &apos;some-value&apos; } } }
   *
   * @param {Object}  target                The object where the property will be set.
   * @param {string}  objPath               The path for the property.
   * @param {*}       value                 The value to set on the property.
   * @param {string}  [pathDelimiter=&apos;.&apos;]   The delimiter that will separate the path components.
   * @param {boolean} [failWithError=false] Whether or not to throw an error when the path is
   *                                        invalid. If this is `false`, the method will silently
   *                                        fail and return `undefined`.
   * @return {Object} A copy of the original object with the added property/properties.
   * @throws {Error} If one of the path components is for a non-object property and
   *                 `failWithError` is set to `true`.
   */
  static set(
    target,
    objPath,
    value,
    pathDelimiter = &apos;.&apos;,
    failWithError = false
  ) {
    let result = this.copy(target);
    if (objPath.includes(pathDelimiter)) {
      const parts = objPath.split(pathDelimiter);
      const last = parts.pop();
      let currentElement = result;
      let currentPath = &apos;&apos;;
      parts.forEach((part) =&gt; {
        currentPath += `${pathDelimiter}${part}`;
        const element = currentElement[part];
        const elementType = typeof element;
        if (elementType === &apos;undefined&apos;) {
          currentElement[part] = {};
          currentElement = currentElement[part];
        } else if (elementType === &apos;object&apos;) {
          currentElement = currentElement[part];
        } else {
          const errorPath = currentPath.substr(pathDelimiter.length);
          if (failWithError) {
            throw new Error(
              `There&apos;s already an element of type &apos;${elementType}&apos; on &apos;${errorPath}&apos;`
            );
          } else {
            result = undefined;
          }
        }
      });

      if (result) {
        currentElement[last] = value;
      }
    } else {
      result[objPath] = value;
    }

    return result;
  }
  /**
   * Extracts a property or properties from an object in order to create a new one.
   * @example
   * const target = {
   *   name: {
   *     first: &apos;Rosario&apos;,
   *   },
   *   age: 3,
   *   address: {
   *     planet: &apos;earth&apos;,
   *     something: &apos;else&apos;,
   *   },
   * };
   * console.log(ObjectUtils.set(obj, [
   *   { &apos;name&apos;: &apos;name.first&apos;},
   *   &apos;age&apos;,
   *   &apos;address.planet&apos;
   * ]));
   * // Will output { name: &apos;Rosario&apos;, age: 3, address: { planet: &apos;earth&apos; } }
   * @param {Object}              target                The object from where the
   *                                                    property/properties will be extracted.
   * @param {Array|Object|string} objPaths              This can be a single path or a list of
   *                                                    them. And for this method, the paths are
   *                                                    not only strings but can also be an object
   *                                                    with a single key, the would be the path
   *                                                    to where to &quot;do the extraction&quot;, and the
   *                                                    value the path on the target object.
   * @param {string}              [pathDelimiter=&apos;.&apos;]   The delimiter that will separate the
   *                                                    path components.
   * @param {boolean}             [failWithError=false] Whether or not to throw an error when the
   *                                                    path is invalid. If this is `false`, the
   *                                                    method will silently fail an empty object.
   * @return {Object}
   */
  static extract(target, objPaths, pathDelimiter = &apos;.&apos;, failWithError = false) {
    const copied = this.copy(target);
    let result = {};
    (Array.isArray(objPaths) ? objPaths : [objPaths])
    .reduce((acc, objPath) =&gt; {
      let destPath;
      let originPath;
      if (typeof objPath === &apos;object&apos;) {
        [destPath] = Object.keys(objPath);
        originPath = objPath[destPath];
      } else {
        destPath = objPath;
        originPath = objPath;
      }

      return [...acc, {
        origin: originPath,
        customDest: destPath.includes(pathDelimiter),
        dest: destPath,
      }];
    }, [])
    .some((pathInfo) =&gt; {
      let breakLoop = false;
      const value = this.get(copied, pathInfo.origin, pathDelimiter, failWithError);
      if (typeof value !== &apos;undefined&apos;) {
        if (pathInfo.customDest) {
          result = this.set(result, pathInfo.dest, value, pathDelimiter, failWithError);
          if (typeof result === &apos;undefined&apos;) {
            breakLoop = true;
          }
        } else {
          result[pathInfo.dest] = value;
        }
      }

      return breakLoop;
    });

    return result;
  }
  /**
   * Deletes a property of an object using a path.
   * @example
   * const target = {
   *   propOne: {
   *     propOneSub: &apos;Charito!&apos;,
   *   },
   *   propTwo: &apos;!!!&apos;,
   * };
   * console.log(ObjectUtils.delete(
   *   target,
   *   &apos;propOne.propOneSub&apos;
   * ));
   * // Will output { propTwo: &apos;!!!&apos; }
   *
   * @param {Object}  target                      The object from where the property will be
   *                                              removed.
   * @param {string}  objPath                     The path to the property.
   * @param {String}  [pathDelimiter=&apos;.&apos;]         The delimiter that will separate the path
   *                                              components.
   * @param {Boolean} [cleanEmptyProperties=true] If this flag is `true` and after removing the
   *                                              property the parent object is empty, it will
   *                                              remove it recursively until a non empty parent
   *                                              object is found.
   * @param {boolean} [failWithError=false]       Whether or not to throw an error when the path
   *                                              is invalid. If this is `false`, the method will
   *                                              silently fail.
   * @return {Object} A copy of the original object with the removed property/properties.
   */
  static delete(
    target,
    objPath,
    pathDelimiter = &apos;.&apos;,
    cleanEmptyProperties = true,
    failWithError = false
  ) {
    const parts = objPath.split(pathDelimiter);
    const last = parts.pop();
    let result = this.copy(target);
    if (parts.length) {
      const parentPath = parts.join(pathDelimiter);
      const parentObj = this.get(
        result,
        parentPath,
        pathDelimiter,
        failWithError
      );
      delete parentObj[last];
      if (cleanEmptyProperties &amp;&amp; !Object.keys(parentObj).length) {
        result = this.delete(
          result,
          parentPath,
          pathDelimiter,
          cleanEmptyProperties,
          failWithError
        );
      }
    } else {
      delete result[last];
    }

    return result;
  }
}

module.exports = ObjectUtils;
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
